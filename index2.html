<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>HG Digital - Desarrollador Web</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 0; 
      background: #0f0f0f; 
      color: #eee; 
    }

    header { 
      text-align: center; 
      padding: 40px 20px; 
      background: linear-gradient(135deg,#1f1f1f,#2c2c2c); 
    }

    section { 
      padding: 40px 20px; 
      max-width: 1100px; 
      margin: auto; 
    }

    .grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); 
      gap: 20px; 
    }

    .card { 
      background: #1a1a1a; 
      padding: 20px; 
      border-radius: 16px; 
      box-shadow: 0 0 15px #000; 
    }

    .chat-btn { 
      position: fixed; 
      bottom: 20px; 
      right: 20px; 
      background: #00ffc3; 
      border: none; 
      padding: 16px 20px; 
      border-radius: 50px; 
      font-weight: bold; 
      cursor: pointer; 
      z-index: 9999;
    }

    .chat { 
      position: fixed; 
      inset: 0; 
      background: #0b0b0b; 
      display: none; 
      flex-direction: column; 
      z-index: 9998;
    }

    .chat-header { 
      background: #111; 
      padding: 12px; 
      text-align: center; 
      font-weight: bold;
    }

    .chat-body { 
      flex: 1; 
      overflow-y: auto; 
      padding: 20px; 
    }

    .chat-input { 
      display: flex; 
      border-top: 1px solid #222;
    }

    .chat-input input { 
      flex: 1; 
      padding: 14px; 
      border: none; 
      outline: none; 
      background: #111; 
      color: #fff;
    }

    .chat-input button { 
      padding: 14px 20px; 
      background: #00ffc3; 
      border: none; 
      cursor: pointer; 
      font-weight: bold;
    }
  </style>
</head>

<body>

<header>
  <h1>HG Digital</h1>
  <p>Administrador Sr. & Desarrollador Web</p>
</header>

<section>
  <h2>Servicios</h2>
  <div class="grid">
    <div class="card">Armado de Sitio Web</div>
    <div class="card">Automatizaciones</div>
    <div class="card">Sistemas de Gestión</div>
    <div class="card">Asesoramiento Administrativo</div>
  </div>
</section>

<!-- BOTÓN HG -->
<button class="chat-btn" onclick="openChat()">HG</button>

<!-- VENTANA DE CHAT -->
<div class="chat" id="chat">
  <div class="chat-header">HG Digital IA</div>
  <div class="chat-body" id="chatBody"></div>
  <div class="chat-input">
    <input id="chatInput" placeholder="Escribí tu mensaje...">
    <button onclick="sendMessage()">Enviar</button>
  </div>
</div>

<script>
// ============================
// CONFIG
// ============================
const ENDPOINT_URL = "https://script.google.com/macros/s/AKfycbyFS_dxlBq4hN_D5HHiiL8I2mG1WhGm5-NOgd8THgDAH9U315ltkqw9n3VOoMwi5X08/exec";

// ============================
// ABRIR CHAT
// ============================
function openChat() {
  document.getElementById("chat").style.display = "flex";
}

// ============================
// ENVIAR MENSAJE (JSONP)
// ============================
function sendMessage() {
  const input = document.getElementById("chatInput");
  const msg = input.value.trim();
  if (!msg) return;

  addMsg("Vos", msg);
  input.value = "";

  const callbackName = "cb" + Math.floor(Math.random() * 999999);

  window[callbackName] = function(data) {
    addMsg("HG", data.reply);
    delete window[callbackName];
  };

  const s = document.createElement("script");
  s.src = `${ENDPOINT_URL}?message=${encodeURIComponent(msg)}&callback=${callbackName}`;
  document.body.appendChild(s);
}

// ============================
// AGREGAR MENSAJE
// ============================
function addMsg(user, text) {
  const box = document.getElementById("chatBody");
  const div = document.createElement("div");
  div.innerHTML = `<b>${user}:</b> ${text}`;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
}

// ============================
// ENTER PARA ENVIAR
// ============================
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("chatInput").addEventListener("keydown", e => {
    if (e.key === "Enter") sendMessage();
  });
});
</script>

</body>
</html>